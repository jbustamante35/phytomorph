%% list out the contents for the return folder
FilePath = '/mnt/spaldingdata/nate/octerineDataStore/results/{projectName_TIPS}/{functionName_main}/{createDate_2020-04-28-22-02-33}/';
FileList = {};
FileExt = {'tiff','tif','jpg','TIF','TIFF','PNG'};
FileList = dig(FilePath,FileList,FileExt,1);
%%
FilePath = '/mnt/spaldingdata/nate/octerineDataStore/tassel/UIUC_2019_Tassel_images/';
FileList = {};
FileExt = {'jpg'};
rawFileList = dig(FilePath,FileList,FileExt,1);
%%
close all
oPath = '/mnt/spaldingdata/nate/octerineDataStore/results/{projectName_TIPS}/{functionName_main}/{createDate_2020-04-28-22-02-33}/';
maskTemplateName = [oPath '{originalName_<FILE>}{maskNumber_<MASK>}.tif'];
processedTemplateName = [oPath '{originalName_<FILE>}{maskNumber_<MASK>}{fileType_processedImage}.png'];
for e = 1:numel(rawFileList)
    bool = [];
    
    fileName = rawFileList{e};
    [p,n,ex] = fileparts(fileName);
    
    for m = 1:4
        maskName{m} = strrep(strrep(maskTemplateName,'<FILE>',n),'<MASK>',num2str(m));
        bool(m) = exist(maskName{m},'file');
    end
    
    for m = 1:4
        processedName{m} = strrep(strrep(processedTemplateName,'<FILE>',n),'<MASK>',num2str(m));
        bool = [bool exist(processedName{m},'file')];
    end
    
    
    if all(bool)
        
        
    MN = [];
    for m = 1:4
        M = imread(maskName{m});
        area(m) = sum
    end

    end
    
    
    if disp
        if all(bool)
            I = imread(rawFileList{e});

            MN = [];
            for m = 1:4
                M = imread(maskName{m});
                out = flattenMaskOverlay(I,M);
                MN = cat(4,MN,out);
            end

            PN = [];
            for m = 1:4
                M = imread(processedName{m});
                M = permute(M,[2 1 3]);
                M = imresize(M,[size(I,1) size(I,2)]);
                PN = cat(4,PN,M);
            end

            MN = cat(4,MN,PN);

            MN = montage(MN,'Size', [2 4]);
            drawnow
        end
    end
end
%%
fileName = '/mnt/spaldingdata/nate/octerineDataStore/tassel/UIUC_2019_Tassel_images/DDPSC_02010-1-90_0256.jpg';
func = project.getFunction('main');
func.operate(fileName,makeTempLocation())